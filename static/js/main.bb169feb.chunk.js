(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{10:function(e,t,a){e.exports={root:"style_root__3ua4_"}},21:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t);var o=a(1),s=a.n(o),r=a(9),l=a.n(r),i=a(10),c=a.n(i),n=a(12),y=a(4),d=a.n(y),h=500,p=800,u=250,m=2,f=300,v=100,b=500,x=400,k=500,B=.2,g=function(e){return e/2},j=a(5),w=a(6),C=a(14),O=a(11),M=a(13);function P(e){var t=this;e.forEach((function(e){var a=e.method;e.data.forEach((function(e){var o;(o=t.load)[a].apply(o,Object(M.a)(e))}))}))}var _=[{method:"image",data:[["platforms32x32","assets/platforms/platforms32x32.png"],["playerSprite","assets/player/body.png"],["playerBody","assets/player/ball.png"]]},{method:"tilemapTiledJSON",data:[["map","assets/levels/default_level.json"]]},{method:"atlas",data:[["teleport","assets/effects/teleport.png","assets/effects/teleport_atlas.json"]]}],T=function(){function e(t,a,o){Object(j.a)(this,e),this.cursors=void 0,this.playerBody=void 0,this.playerVisual=void 0,this.camera=void 0,this.playerParamsConfig={blockMove:{left:{blocked:!1,time:0},right:{blocked:!1,time:0}}},this.coordinates={x:0,y:0},this.createPlayer(t,a,o),this.createCamera(t,a,this.playerBody),this.createTeleport(t,this.playerBody)}return Object(w.a)(e,[{key:"createPlayer",value:function(e,t,a){var o=B,s=t.getObjectLayer("player").objects[0];this.playerBody=e.physics.add.sprite(s.x||0,s.y||0,"playerSprite").setAlpha(0),this.playerVisual=e.add.sprite(this.playerBody.x,this.playerBody.y,"playerBody"),this.playerBody.setBounce(o).setCircle(this.playerBody.width/2),e.physics.add.collider(this.playerBody,a),this.playerBody.body.setCollideWorldBounds(!0),e.physics.world.setBounds(0,0,t.widthInPixels,t.heightInPixels),a.setCollisionByExclusion([-1],!0),this.cursors=e.input.keyboard.createCursorKeys()}},{key:"createCamera",value:function(e,t,a){this.camera=e.cameras.main,this.camera.setBounds(0,0,t.widthInPixels,t.heightInPixels),this.smoothMoveCameraTowards(a)}},{key:"smoothMoveCameraTowards",value:function(e,t){this.camera&&e&&(void 0===t&&(t=0),this.camera.scrollX=t*this.camera.scrollX+(1-t)*(e.x-.5*this.camera.width),this.camera.scrollY=t*this.camera.scrollY+(1-t)*(e.y-.5*this.camera.height))}},{key:"createTeleport",value:function(e,t){var a=this;e.anims.create({key:"teleportAnimation",frames:"teleport",frameRate:20,repeat:0}),e.input.keyboard.on("keydown-ENTER",(function(){a.coordinates={x:t.x||0,y:t.y||0}})),e.input.keyboard.on("keydown-SPACE",(function(){var o=a.coordinates,s=o.x,r=o.y;t&&(t.x=s,t.y=r);var l=e.add.sprite(s,r,"teleport").play("teleportAnimation").on("complete",(function(){l.destroy()}))}))}},{key:"update",value:function(e,t){this.control(t,e),this.resetBlockMove(e),this.controlPlayerBody(t),this.smoothMoveCameraTowards(this.playerBody,.9)}},{key:"controlPlayerBody",value:function(e){this.playerVisual.x=this.playerBody.x,this.playerVisual.y=this.playerBody.y,this.playerBody.body.velocity.x&&(this.playerVisual.angle+=.003*e*this.playerBody.body.velocity.x)}},{key:"control",value:function(e,t){var a=p,o=u,s=m,r=b,l=x,i=f,c=v,n=g,y=this.playerBody.body.velocity,d=y.x;this.cursors.left.isDown&&!this.playerParamsConfig.blockMove.left.blocked?this.playerBody.body.blocked.none?y.x-=s:0===d?y.x=-o:d>0?y.x=-1*d:y.x>-1*a?y.x-=n(e):y.x>=-1*a&&(y.x=-1*a):this.cursors.right.isDown&&!this.playerParamsConfig.blockMove.right.blocked?this.playerBody.body.blocked.none?y.x+=s:0===d?y.x=o:d<0?y.x=-1*d:y.x<a?y.x+=n(e):y.x>=a&&(y.x=a):this.playerBody.body.blocked.down&&(y.x>c?y.x-=2*e:y.x<-c?y.x+=2*e:y.x=0),this.cursors.up.isDown&&(this.playerBody.body.blocked.left?(this.setBlockMove("left",t),this.playerBody.setVelocityX(Math.max(r,d)),this.playerBody.setVelocityY(-l)):this.playerBody.body.blocked.right?(this.setBlockMove("right",t),this.playerBody.setVelocityX(Math.min(-r,d)),this.playerBody.setVelocityY(-l)):this.playerBody.body.blocked.down&&this.playerBody.setVelocityY(-i))}},{key:"setBlockMove",value:function(e,t){var a=this.playerParamsConfig.blockMove;a[e].blocked=!0,a[e].time=t}},{key:"resetBlockMove",value:function(e){var t=k,a=this.playerParamsConfig.blockMove,o=a.left,s=a.right,r=e-o.time>t,l=e-s.time>t;r&&(o.blocked=!1),l&&(s.blocked=!1)}}]),e}(),V=function(e){Object(C.a)(a,e);var t=Object(O.a)(a);function a(){var e;Object(j.a)(this,a);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).playerClass=null,e.cursors=null,e.player=null,e.playerBody=null,e.coordinates={x:0,y:0},e.playerParamsConfig={blockMove:{left:{blocked:!1,time:0},right:{blocked:!1,time:0}}},e.camera=null,e}return Object(w.a)(a,[{key:"preload",value:function(){P.call(this,_)}},{key:"create",value:function(){var e=this.make.tilemap({key:"map"}),t=e.addTilesetImage("platforms32x32","platforms32x32"),a=e.createLayer(0,t,0,0);this.playerClass=new T(this,e,a)}},{key:"update",value:function(e,t){var a;null===(a=this.playerClass)||void 0===a||a.update(e,t)}}]),a}(y.Scene),E={type:Phaser.AUTO,parent:"game-box",height:720,width:1280,scene:[V],backgroundColor:1310779,physics:{default:"arcade",arcade:{gravity:{y:h},debug:!0}}},I=a(8),S=a.n(I),A=a(0),N=null,Y=function(){var e=Object(o.useState)(null),t=Object(n.a)(e,2),a=t[0],s=t[1];return Object(o.useEffect)((function(){return a&&setTimeout((function(){a.offsetWidth,N=new d.a.Game(E)}),0),function(){var e;null===(e=N)||void 0===e||e.destroy(!0,!1)}})),Object(A.jsx)("div",{className:S.a.root,children:Object(A.jsx)("div",{className:S.a.game,id:"game-box",ref:function(e){s(e)}})})};var X=function(){return Object(A.jsx)("div",{className:c.a.root,children:Object(A.jsx)(Y,{})})};a(21);l.a.render(Object(A.jsx)(s.a.StrictMode,{children:Object(A.jsx)(X,{})}),document.getElementById("root"))},8:function(e,t,a){e.exports={root:"style_root__1dm-u",game:"style_game__2Ib68"}}},[[22,1,2]]]);
//# sourceMappingURL=main.bb169feb.chunk.js.map